<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodExpress - Food Delivery Service</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }
        .chat-bubble {
            max-width: 70%;
            border-radius: 20px;
            padding: 12px 16px;
            margin: 8px;
        }
        .user-bubble {
            background: #ee5a24;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        .bot-bubble {
            background: #f8f9fa;
            color: #333;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        .chat-container {
            max-height: 400px;
            overflow-y: auto;
        }
        .restaurant-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .restaurant-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        html {
            scroll-behavior: smooth;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        .error-border {
            border-color: #ef4444 !important;
        }
        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        #loginPage {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: white;
            z-index: 100;
            transition: opacity 0.3s ease;
        }
        #mainContent {
            display: none;
        }
        .rupee-symbol:before {
            content: "₹";
        }
        .offer-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #ff6b6b;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .veg-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: green;
            display: inline-block;
            margin-right: 5px;
        }
        .nonveg-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #e53e3e;
            display: inline-block;
            margin-right: 5px;
        }
        .menu-item-card {
            transition: all 0.3s ease;
        }
        .menu-item-card:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .cart-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #38a169;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 50;
            display: none;
        }
        .discount-tag {
            background: #38a169;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 8px;
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #ee5a24;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Login Page -->
    <div id="loginPage" class="gradient-bg">
        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md mx-4">
            <div class="text-center mb-8">
                <div class="flex justify-center items-center mb-6">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/58dca9c0-be32-45ed-96df-58ba9324d0dd.png" 
                         alt="FoodExpress logo" class="w-16 h-16 rounded-full">
                </div>
                <h1 class="text-3xl font-bold text-gray-800">FoodExpress</h1>
                <p class="text-gray-600 mt-2">Sign in to access your account</p>
            </div>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">Username</label>
                    <input type="text" id="username" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500"
                           placeholder="Enter your username">
                    <p id="usernameError" class="error-message hidden"></p>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500"
                           placeholder="Enter your password">
                    <p id="passwordError" class="error-message hidden"></p>
                </div>
                <button type="submit" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold text-lg">
                    Sign In
                </button>
            </form>
            <div class="mt-4 text-center">
                <p class="text-gray-600 text-sm">Hint: Username and password are "admin"</p>
            </div>
        </div>
    </div>

    <!-- Main Content (initially hidden) -->
    <div id="mainContent">
        <!-- Navigation Bar -->
        <nav class="gradient-bg text-white py-4 px-6 shadow-lg fixed top-0 w-full z-40">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/58dca9c0-be32-45ed-96df-58ba9324d0dd.png" alt="FoodExpress logo featuring a vibrant orange delivery scooter with food container" class="w-10 h-10 rounded-full">
                    <span class="text-2xl font-bold">FoodExpress</span>
                </div>
                <div class="hidden md:flex space-x-6">
                    <a href="#home" class="hover:text-gray-200">Home</a>
                    <a href="#restaurants" class="hover:text-gray-200">Restaurants</a>
                    <a href="#orders" class="hover:text-gray-200">Orders</a>
                    <a href="#contact" class="hover:text-gray-200">Contact</a>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <button class="text-white" id="cartBtn">
                            <i class="fas fa-shopping-cart text-xl"></i>
                            <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hidden">0</span>
                        </button>
                    </div>
                    <button class="text-white" id="logoutBtn">
                        <i class="fas fa-sign-out-alt text-xl"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Cart Sidebar -->
        <div id="cartSidebar" class="fixed top-0 right-0 h-full w-full md:w-96 bg-white shadow-xl z-50 transform translate-x-full transition-transform duration-300">
            <div class="p-6 h-full flex flex-col">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Your Cart</h2>
                    <button id="closeCart" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="cartItems" class="flex-1 overflow-y-auto mb-4">
                    <!-- Cart items will be added here -->
                </div>
                <div class="border-t pt-4">
                    <div class="flex justify-between mb-2">
                        <span>Subtotal:</span>
                        <span id="cartSubtotal">₹0.00</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span>Delivery Fee:</span>
                        <span id="deliveryFee">₹40.00</span>
                    </div>
                    <div class="flex justify-between mb-4 font-bold text-lg">
                        <span>Total:</span>
                        <span id="cartTotal">₹40.00</span>
                    </div>
                    <button id="checkoutBtn" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold">
                        Proceed to Checkout
                    </button>
                </div>
            </div>
        </div>
        <div id="cartOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

        <!-- Cart Notification -->
        <div id="cartNotification" class="cart-notification">
            <i class="fas fa-check-circle mr-2"></i>
            <span>Item added to cart!</span>
        </div>

        <!-- Main Content -->
        <main class="container mx-auto px-6 py-8 pt-24">
            <!-- Home Section -->
            <section id="home" class="mb-12 fade-in">
                <div class="relative">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/4da259a3-7686-4d26-bad4-59025bdfdb47.png" alt="Delicious food spread featuring various cuisines from multiple restaurants with vibrant colors" class="w-full h-64 object-cover rounded-2xl">
                    <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                        <div class="text-center text-white">
                            <h1 class="text-4xl md:text-5xl font-bold mb-4">Food Delivered to Your Door</h1>
                            <p class="text-xl mb-6">Order from your favorite restaurants in minutes</p>
                            <div class="relative max-w-2xl mx-auto">
                                <input type="text" id="searchInput" placeholder="Search for restaurants or food..." 
                                       class="w-full px-6 py-4 rounded-full text-gray-800 focus:outline-none">
                                <button id="searchBtn" class="absolute right-2 top-2 gradient-bg text-white px-6 py-2 rounded-full">
                                    Search
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 text-center">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">Why Choose FoodExpress?</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">Discover a world of flavors with FoodExpress. Enjoy fast delivery, a wide range of cuisines, and seamless ordering from top restaurants. Your next meal is just a click away!</p>
                </div>
                
                <!-- Special Offers Section -->
                <div class="mt-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Special Offers</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-gradient-to-r from-orange-100 to-red-100 rounded-2xl p-6 flex items-center">
                            <div class="bg-white p-3 rounded-full mr-4">
                                <i class="fas fa-percentage text-orange-500 text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold">50% OFF</h3>
                                <p class="text-sm text-gray-600">On your first order</p>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-green-100 to-teal-100 rounded-2xl p-6 flex items-center">
                            <div class="bg-white p-3 rounded-full mr-4">
                                <i class="fas fa-truck text-green-500 text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold">Free Delivery</h3>
                                <p class="text-sm text-gray-600">On orders above ₹299</p>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-6 flex items-center">
                            <div class="bg-white p-3 rounded-full mr-4">
                                <i class="fas fa-gift text-purple-500 text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold">Free Dessert</h3>
                                <p class="text-sm text-gray-600">With orders above ₹499</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Restaurants Section -->
            <section id="restaurants" class="mb-12 fade-in">
                <h2 class="text-3xl font-bold text-gray-800 mb-8">Popular Restaurants</h2>
                <div class="mb-6 flex flex-wrap gap-2">
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm filter-btn active" data-filter="all">All</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm filter-btn" data-filter="italian">Italian</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm filter-btn" data-filter="chinese">Chinese</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm filter-btn" data-filter="indian">Indian</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm filter-btn" data-filter="american">American</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm filter-btn" data-filter="mexican">Mexican</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm filter-btn" data-filter="thai">Thai</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm filter-btn" data-filter="desserts">Desserts</button>
                </div>
                <div id="restaurantList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Restaurants will be loaded here -->
                </div>
                <div class="text-center mt-8">
                    <button id="loadMoreBtn" class="gradient-bg text-white px-6 py-2 rounded-lg font-semibold">
                        Load More Restaurants
                    </button>
                </div>
            </section>

            <!-- Restaurant Menu Modal -->
            <div id="menuModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 hidden">
                <div class="bg-white rounded-2xl w-full max-w-4xl max-h-screen overflow-hidden">
                    <div class="relative">
                        <img id="modalRestaurantImage" src="" alt="" class="w-full h-48 object-cover">
                        <button id="closeModal" class="absolute top-4 right-4 bg-white rounded-full p-2 shadow-md">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="p-6 overflow-y-auto max-h-96">
                        <h2 id="modalRestaurantName" class="text-2xl font-bold mb-4"></h2>
                        <div id="modalMenuItems" class="space-y-4">
                            <!-- Menu items will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Section -->
            <section id="orders" class="mb-12 fade-in">
                <h2 class="text-3xl font-bold text-gray-800 mb-8">Your Orders</h2>
                <div id="orderList" class="bg-white rounded-2xl shadow-md p-6">
                    <div id="orderHistory" class="space-y-4">
                        <p class="text-gray-600 text-center py-8">No orders yet. Your orders will appear here!</p>
                    </div>
                    <div class="text-center mt-6">
                        <button id="addOrderBtn" class="gradient-bg text-white px-6 py-2 rounded-lg font-semibold">Add Mock Order</button>
                    </div>
                </div>
            </section>

            <!-- Contact Section -->
            <section id="contact" class="mb-12 fade-in">
                <h2 class="text-3xl font-bold text-gray-800 mb-8">Contact Us</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white rounded-2xl shadow-md p-6">
                        <h3 class="text-xl font-bold mb-4">Get in Touch</h3>
                        <form id="contactForm">
                            <div class="mb-4">
                                <label class="block text-gray-700 mb-2">Name</label>
                                <input type="text" id="contactName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500">
                                <p id="contactNameError" class="error-message hidden"></p>
                            </div>
                            <div class="mb-4">
                                <label class="block text-gray-700 mb-2">Email</label>
                                <input type="email" id="contactEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500">
                                <p id="contactEmailError" class="error-message hidden"></p>
                            </div>
                            <div class="mb-4">
                                <label class="block text-gray-700 mb-2">Message</label>
                                <textarea id="contactMessage" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500" rows="4"></textarea>
                                <p id="contactMessageError" class="error-message hidden"></p>
                            </div>
                            <button type="submit" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold">Send Message</button>
                        </form>
                    </div>
                    <div class="bg-white rounded-2xl shadow-md p-6">
                        <h3 class="text-xl font-bold mb-4">Support Information</h3>
                        <p class="text-gray-600 mb-4">We're here to help with your food delivery needs!</p>
                        <ul class="space-y-3 text-gray-600">
                            <li><i class="fas fa-envelope mr-2"></i> support@foodexpress.com</li>
                            <li><i class="fas fa-phone mr-2"></i> +1 (800) 123-4567</li>
                            <li><i class="fas fa-map-marker-alt mr-2"></i> 123 Food St, Flavor Town, USA</li>
                        </ul>
                        <h3 class="text-xl font-bold mt-6 mb-4">Message History</h3>
                        <div id="messageHistory" class="space-y-3">
                            <p class="text-gray-600 text-center py-8">No messages yet. Your messages will appear here!</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Delivery Partner Tip Section -->
            <section class="bg-gradient-to-r from-orange-50 to-red-50 rounded-2xl p-8 mb-12 fade-in">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Appreciate Your Delivery Hero</h2>
                    <p class="text-gray-600">Show some love to the people who bring food to your door</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-2xl shadow-md">
                        <h3 class="text-xl font-bold mb-4">Rate and Tip Your Delivery Partner</h3>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Delivery Partner Name</label>
                            <input type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg" 
                                   placeholder="Enter delivery partner name" id="deliveryPartnerName">
                            <p id="partnerNameError" class="error-message hidden"></p>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Rate your experience</label>
                            <div class="flex space-x-1 text-2xl">
                                <span class="text-gray-300 cursor-pointer" data-rating="1">★</span>
                                <span class="text-gray-300 cursor-pointer" data-rating="2">★</span>
                                <span class="text-gray-300 cursor-pointer" data-rating="3">★</span>
                                <span class="text-gray-300 cursor-pointer" data-rating="4">★</span>
                                <span class="text-gray-300 cursor-pointer" data-rating="5">★</span>
                            </div>
                            <p id="ratingError" class="error-message hidden"></p>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Tip Amount</label>
                            <div class="grid grid-cols-3 gap-2 mb-2">
                                <button class="bg-gray-100 py-2 rounded-lg tip-btn" data-amount="50">₹50</button>
                                <button class="bg-gray-100 py-2 rounded-lg tip-btn" data-amount="100">₹100</button>
                                <button class="bg-gray-100 py-2 rounded-lg tip-btn" data-amount="200">₹200</button>
                            </div>
                            <input type="number" placeholder="Custom amount" min="0" step="1"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg" id="customTip">
                            <p id="tipError" class="error-message hidden"></p>
                        </div>
                        <button class="w-full gradient-bg text-white py-3 rounded-lg font-semibold" id="submitTip">
                            Send Tip & Rating
                        </button>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md">
                        <h3 class="text-xl font-bold mb-4">Recent Tips Given</h3>
                        <div id="tipHistory" class="space-y-3">
                            <p class="text-gray-600 text-center py-8">No tips given yet. Your appreciation will appear here!</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Chatbot Section -->
            <section class="bg-white rounded-2xl shadow-md p-6 mb-12 fade-in">
                <div class="flex items-center mb-6">
                    <div class="w-12 h-12 gradient-bg rounded-full flex items-center justify-center mr-4">
                        <i class="fas fa-robot text-white text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold">FoodExpress Assistant</h2>
                        <p class="text-gray-600">Get help with orders, tracking, and more</p>
                    </div>
                </div>
                <div class="chat-container bg-gray-50 rounded-2xl p-4 mb-4" id="chatMessages">
                    <div class="bot-bubble chat-bubble">
                        Hi there! I'm here to help with your food delivery needs. How can I assist you today?
                    </div>
                </div>
                <div class="flex space-x-2">
                    <input type="text" placeholder="Type your message..." 
                           class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none" id="chatInput">
                    <button class="gradient-bg text-white px-6 py-3 rounded-lg" id="sendMessage">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="mt-4 flex flex-wrap gap-2">
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm quick-reply">Order Status</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm quick-reply">Menu Items</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm quick-reply">Delivery Time</button>
                    <button class="bg-gray-100 px-4 py-2 rounded-lg text-sm quick-reply">Payment Issues</button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-12">
            <div class="container mx-auto px-6">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4">FoodExpress</h3>
                        <p class="text-gray-400">Delivering happiness to your doorstep since 2024</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Quick Links</h4>
                        <ul class="space-y-2">
                            <li><a href="#home" class="text-gray-400 hover:text-white">Home</a></li>
                            <li><a href="#restaurants" class="text-gray-400 hover:text-white">Restaurants</a></li>
                            <li><a href="#orders" class="text-gray-400 hover:text-white">Orders</a></li>
                            <li><a href="#contact" class="text-gray-400 hover:text-white">Contact</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Legal</h4>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-gray-400 hover:text-white">Terms & Conditions</a></li>
                            <li><a href="#" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
                            <li><a href="#" class="text-gray-400 hover:text-white">Cookie Policy</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Follow Us</h4>
                        <div class="flex space-x-4">
                            <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook text-xl"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter text-xl"></i></a>
                            <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram text-xl"></i></a>
                        </div>
                    </div>
                </div>
                <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                    <p>© 2024 FoodExpress. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Restaurant data with menu items
        const restaurants = [
            {
                id: 1,
                name: "Bella Italia",
                cuisine: "italian",
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/0163d622-dce8-41fc-a2c8-aa2af405d8f3.png",
                rating: 4.8,
                reviews: 245,
                priceRange: "₹₹",
                deliveryTime: "25-35 min",
                offer: "50% OFF on main course",
                menu: [
                    { id: 101, name: "Margherita Pizza", description: "Classic pizza with tomato sauce and mozzarella", price: 399, veg: true, popular: true },
                    { id: 102, name: "Pasta Carbonara", description: "Creamy pasta with bacon and cheese", price: 349, veg: false, popular: true },
                    { id: 103, name: "Tiramisu", description: "Classic Italian dessert", price: 199, veg: true, popular: false },
                    { id: 104, name: "Garlic Bread", description: "Oven-baked bread with garlic butter", price: 149, veg: true, popular: true }
                ]
            },
            {
                id: 2,
                name: "Dragon Wok",
                cuisine: "chinese",
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/79227f8b-54f7-4283-b420-67a51c0e2c55.png",
                rating: 4.5,
                reviews: 189,
                priceRange: "₹",
                deliveryTime: "20-30 min",
                offer: "Free spring rolls above ₹299",
                menu: [
                    { id: 201, name: "Kung Pao Chicken", description: "Spicy stir-fry with chicken and peanuts", price: 329, veg: false, popular: true },
                    { id: 202, name: "Vegetable Fried Rice", description: "Stir-fried rice with mixed vegetables", price: 249, veg: true, popular: true },
                    { id: 203, name: "Dim Sum Platter", description: "Assorted steamed dumplings", price: 299, veg: false, popular: false },
                    { id: 204, name: "Sweet and Sour Soup", description: "Traditional Chinese soup", price: 179, veg: true, popular: true }
                ]
            },
            {
                id: 3,
                name: "Burger Heaven",
                cuisine: "american",
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/1160f469-b0a2-479d-ad5b-828a7dcca179.png",
                rating: 4.9,
                reviews: 312,
                priceRange: "₹₹",
                deliveryTime: "15-25 min",
                offer: "Buy 1 Get 1 on Wednesdays",
                menu: [
                    { id: 301, name: "Classic Cheeseburger", description: "Beef patty with cheese and veggies", price: 229, veg: false, popular: true },
                    { id: 302, name: "Crispy Chicken Burger", description: "Crispy fried chicken with special sauce", price: 199, veg: false, popular: true },
                    { id: 303, name: "Veggie Supreme", description: "Plant-based patty with fresh vegetables", price: 189, veg: true, popular: false },
                    { id: 304, name: "French Fries", description: "Crispy golden fries with seasoning", price: 99, veg: true, popular: true }
                ]
            },
            {
                id: 4,
                name: "Taco Fiesta",
                cuisine: "mexican",
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/7be9fd5c-25e1-4622-8ffe-bfcabe9e3d3c.png",
                rating: 4.6,
                reviews: 176,
                priceRange: "₹",
                deliveryTime: "30-40 min",
                offer: "Free guacamole with any order",
                menu: [
                    { id: 401, name: "Beef Tacos", description: "Three soft tacos with seasoned beef", price: 279, veg: false, popular: true },
                    { id: 402, name: "Vegetable Quesadilla", description: "Grilled tortilla with cheese and veggies", price: 229, veg: true, popular: true },
                    { id: 403, name: "Nachos Supreme", description: "Crispy nachos with cheese and toppings", price: 249, veg: false, popular: false },
                    { id: 404, name: "Churros", description: "Fried dough pastry with chocolate dip", price: 149, veg: true, popular: true }
                ]
            },
            {
                id: 5,
                name: "Spice Garden",
                cuisine: "indian",
                image: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aW5kaWFuJTIwcmVzdGF1cmFudHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60",
                rating: 4.7,
                reviews: 321,
                priceRange: "₹₹",
                deliveryTime: "20-30 min",
                offer: "20% OFF on biryani",
                menu: [
                    { id: 501, name: "Butter Chicken", description: "Tender chicken in creamy tomato sauce", price: 349, veg: false, popular: true },
                    { id: 502, name: "Paneer Tikka", description: "Grilled cottage cheese with spices", price: 279, veg: true, popular: true },
                    { id: 503, name: "Vegetable Biryani", description: "Fragrant rice with mixed vegetables", price: 299, veg: true, popular: false },
                    { id: 504, name: "Garlic Naan", description: "Soft bread with garlic butter", price: 79, veg: true, popular: true }
                ]
            },
            {
                id: 6,
                name: "Thai Orchid",
                cuisine: "thai",
                image: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8dGhhaSUyMHJlc3RhdXJhbnR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60",
                rating: 4.4,
                reviews: 198,
                priceRange: "₹₹",
                deliveryTime: "25-35 min",
                offer: "Free Thai iced tea with main course",
                menu: [
                    { id: 601, name: "Pad Thai", description: "Stir-fried rice noodles with tofu and peanuts", price: 299, veg: true, popular: true },
                    { id: 602, name: "Green Curry", description: "Spicy coconut curry with vegetables", price: 329, veg: true, popular: true },
                    { id: 603, name: "Tom Yum Soup", description: "Hot and sour soup with mushrooms", price: 199, veg: true, popular: false },
                    { id: 604, name: "Mango Sticky Rice", description: "Sweet dessert with mango and coconut", price: 179, veg: true, popular: true }
                ]
            },
            {
                id: 7,
                name: "Curry House",
                cuisine: "indian",
                image: "https://images.unsplash.com/photo-1585937421612-70a008356fbe?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8aW5kaWFuJTIwZm9vZHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60",
                rating: 4.3,
                reviews: 167,
                priceRange: "₹",
                deliveryTime: "15-25 min",
                offer: "Free delivery on orders above ₹199",
                menu: [
                    { id: 701, name: "Chicken Curry", description: "Spicy chicken curry with gravy", price: 279, veg: false, popular: true },
                    { id: 702, name: "Dal Tadka", description: "Lentils tempered with spices", price: 149, veg: true, popular: true },
                    { id: 703, name: "Aloo Gobi", description: "Potato and cauliflower dry curry", price: 199, veg: true, popular: false },
                    { id: 704, name: "Roti", description: "Whole wheat flatbread", price: 25, veg: true, popular: true }
                ]
            },
            {
                id: 8,
                name: "Sweet Tooth",
                cuisine: "desserts",
                image: "https://images.unsplash.com/photo-1551024506-0bccd828d307?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8ZGVzc2VydCUyMHNob3B8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60",
                rating: 4.8,
                reviews: 234,
                priceRange: "₹",
                deliveryTime: "15-20 min",
                offer: "10% OFF on ice creams",
                menu: [
                    { id: 801, name: "Chocolate Brownie", description: "Rich chocolate brownie with fudge", price: 149, veg: true, popular: true },
                    { id: 802, name: "New York Cheesecake", description: "Creamy cheesecake with berry compote", price: 199, veg: true, popular: true },
                    { id: 803, name: "Ice Cream Sundae", description: "Vanilla ice cream with hot fudge", price: 179, veg: true, popular: false },
                    { id: 804, name: "Macarons Box", description: "Assorted French macarons", price: 299, veg: true, popular: true }
                ]
            }
        ];

        // Login Functionality
        const loginPage = document.getElementById('loginPage');
        const mainContent = document.getElementById('mainContent');
        const loginForm = document.getElementById('loginForm');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const usernameError = document.getElementById('usernameError');
        const passwordError = document.getElementById('passwordError');
        const logoutBtn = document.getElementById('logoutBtn');

        // Check if user is already logged in
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn === 'true') {
                loginPage.style.display = 'none';
                mainContent.style.display = 'block';
                loadRestaurants();
            }
        }

        // Handle login form submission
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = usernameInput.value.trim();
            const password = passwordInput.value.trim();
            
            // Clear previous errors
            usernameError.classList.add('hidden');
            passwordError.classList.add('hidden');
            
            let hasError = false;
            
            if (username !== 'admin') {
                usernameError.textContent = 'Invalid username';
                usernameError.classList.remove('hidden');
                hasError = true;
            }
            
            if (password !== 'admin') {
                passwordError.textContent = 'Invalid password';
                passwordError.classList.remove('hidden');
                hasError = true;
            }
            
            if (!hasError) {
                // Successful login
                localStorage.setItem('isLoggedIn', 'true');
                loginPage.style.opacity = '0';
                setTimeout(() => {
                    loginPage.style.display = 'none';
                    mainContent.style.display = 'block';
                    loadRestaurants();
                }, 300);
            }
        });

        // Handle logout
        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('isLoggedIn');
            mainContent.style.display = 'none';
            loginPage.style.display = 'flex';
            setTimeout(() => {
                loginPage.style.opacity = '1';
            }, 10);
            // Clear form
            usernameInput.value = '';
            passwordInput.value = '';
            usernameError.classList.add('hidden');
            passwordError.classList.add('hidden');
        });

        // Check login status on page load
        checkLoginStatus();

        // Initialize localStorage data
        try {
            const initOrders = [
                { id: '12345', restaurant: 'Bella Italia', total: 425.50, date: 'August 26, 2025', status: 'Delivered' },
                { id: '12344', restaurant: 'Dragon Wok', total: 318.75, date: 'August 25, 2025', status: 'In Transit' },
                { id: '12343', restaurant: 'Burger Heaven', total: 212.30, date: 'August 24, 2025', status: 'Delivered' }
            ];
            if (!localStorage.getItem('orders')) {
                localStorage.setItem('orders', JSON.stringify(initOrders));
            }
            if (!localStorage.getItem('messages')) {
                localStorage.setItem('messages', JSON.stringify([]));
            }
            if (!localStorage.getItem('cart')) {
                localStorage.setItem('cart', JSON.stringify([]));
            }
        } catch (e) {
            console.error('Error initializing localStorage:', e);
        }

        // Load restaurants
        function loadRestaurants() {
            const restaurantList = document.getElementById('restaurantList');
            restaurantList.innerHTML = '';
            
            restaurants.slice(0, 8).forEach(restaurant => {
                const restaurantCard = document.createElement('div');
                restaurantCard.className = 'restaurant-card bg-white rounded-2xl shadow-md overflow-hidden';
                restaurantCard.setAttribute('data-cuisine', restaurant.cuisine);
                restaurantCard.setAttribute('data-name', restaurant.name.toLowerCase());
                
                restaurantCard.innerHTML = `
                    <div class="relative">
                        <img src="${restaurant.image}" alt="${restaurant.name}" class="w-full h-48 object-cover">
                        ${restaurant.offer ? `<div class="offer-badge">${restaurant.offer}</div>` : ''}
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-2">${restaurant.name}</h3>
                        <div class="flex items-center mb-2">
                            <span class="text-yellow-400">${'★'.repeat(Math.floor(restaurant.rating))}${'☆'.repeat(5-Math.floor(restaurant.rating))}</span>
                            <span class="text-gray-600 ml-2">${restaurant.rating} (${restaurant.reviews})</span>
                        </div>
                        <p class="text-gray-600 mb-3">${restaurant.cuisine.charAt(0).toUpperCase() + restaurant.cuisine.slice(1)} • ${restaurant.priceRange} • ${restaurant.deliveryTime}</p>
                        <button class="w-full gradient-bg text-white py-2 rounded-lg view-menu" data-id="${restaurant.id}">View Menu</button>
                    </div>
                `;
                
                restaurantList.appendChild(restaurantCard);
            });
            
            // Add event listeners to menu buttons
            document.querySelectorAll('.view-menu').forEach(button => {
                button.addEventListener('click', (e) => {
                    const restaurantId = parseInt(e.target.getAttribute('data-id'));
                    openMenuModal(restaurantId);
                });
            });
        }

        // Open menu modal
        function openMenuModal(restaurantId) {
            const restaurant = restaurants.find(r => r.id === restaurantId);
            if (!restaurant) return;
            
            const modal = document.getElementById('menuModal');
            const modalImage = document.getElementById('modalRestaurantImage');
            const modalName = document.getElementById('modalRestaurantName');
            const modalMenu = document.getElementById('modalMenuItems');
            
            modalImage.src = restaurant.image;
            modalImage.alt = restaurant.name;
            modalName.textContent = restaurant.name;
            
            // Populate menu items
            modalMenu.innerHTML = '';
            restaurant.menu.forEach(item => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item-card bg-white p-4 rounded-lg shadow-sm border border-gray-100';
                menuItem.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center mb-1">
                                <span class="${item.veg ? 'veg-indicator' : 'nonveg-indicator'}"></span>
                                <h3 class="font-semibold">${item.name}</h3>
                                ${item.popular ? '<span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded ml-2">Popular</span>' : ''}
                            </div>
                            <p class="text-gray-600 text-sm mb-2">${item.description}</p>
                            <p class="font-bold">₹${item.price}</p>
                        </div>
                        <button class="bg-white border border-orange-500 text-orange-500 px-3 py-1 rounded-lg add-to-cart ml-4" data-id="${item.id}" data-restaurant="${restaurant.id}">Add</button>
                    </div>
                `;
                modalMenu.appendChild(menuItem);
            });
            
            // Show modal
            modal.classList.remove('hidden');
            
            // Add event listeners to add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.target.getAttribute('data-id'));
                    const restaurantId = parseInt(e.target.getAttribute('data-restaurant'));
                    addToCart(itemId, restaurantId);
                });
            });
        }

        // Close menu modal
        document.getElementById('closeModal').addEventListener('click', () => {
            document.getElementById('menuModal').classList.add('hidden');
        });

        // Add to cart functionality
        function addToCart(itemId, restaurantId) {
            const restaurant = restaurants.find(r => r.id === restaurantId);
            if (!restaurant) return;
            
            const item = restaurant.menu.find(i => i.id === itemId);
            if (!item) return;
            
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // Check if item already exists in cart
            const existingItemIndex = cart.findIndex(i => i.id === itemId && i.restaurantId === restaurantId);
            
            if (existingItemIndex !== -1) {
                // Update quantity
                cart[existingItemIndex].quantity += 1;
            } else {
                // Add new item
                cart.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    restaurantId: restaurant.id,
                    restaurantName: restaurant.name,
                    quantity: 1
                });
            }
            
            // Save to localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Update cart count
            updateCartCount();
            
            // Show notification
            showCartNotification(`${item.name} added to cart!`);
        }

        // Update cart count
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartCount = document.getElementById('cartCount');
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            
            if (totalItems > 0) {
                cartCount.textContent = totalItems;
                cartCount.classList.remove('hidden');
            } else {
                cartCount.classList.add('hidden');
            }
        }

        // Show cart notification
        function showCartNotification(message) {
            const notification = document.getElementById('cartNotification');
            notification.querySelector('span').textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Cart functionality
        const cartBtn = document.getElementById('cartBtn');
        const cartSidebar = document.getElementById('cartSidebar');
        const closeCart = document.getElementById('closeCart');
        const cartOverlay = document.getElementById('cartOverlay');
        const cartItems = document.getElementById('cartItems');
        const cartSubtotal = document.getElementById('cartSubtotal');
        const cartTotal = document.getElementById('cartTotal');
        const checkoutBtn = document.getElementById('checkoutBtn');

        cartBtn.addEventListener('click', () => {
            openCart();
        });

        closeCart.addEventListener('click', () => {
            closeCartSidebar();
        });

        cartOverlay.addEventListener('click', () => {
            closeCartSidebar();
        });

        function openCart() {
            cartSidebar.classList.remove('translate-x-full');
            cartOverlay.classList.remove('hidden');
            renderCartItems();
        }

        function closeCartSidebar() {
            cartSidebar.classList.add('translate-x-full');
            cartOverlay.classList.add('hidden');
        }

        function renderCartItems() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-500 text-center py-8">Your cart is empty</p>';
                cartSubtotal.textContent = '₹0.00';
                cartTotal.textContent = '₹40.00';
                return;
            }
            
            let subtotal = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'flex justify-between items-center py-4 border-b';
                cartItem.innerHTML = `
                    <div class="flex-1">
                        <h3 class="font-semibold">${item.name}</h3>
                        <p class="text-gray-600">${item.restaurantName}</p>
                        <p class="text-orange-500 font-semibold">₹${item.price}</p>
                    </div>
                    <div class="flex items-center">
                        <button class="decrease-quantity w-8 h-8 rounded-full border border-gray-300" data-id="${item.id}" data-restaurant="${item.restaurantId}">-</button>
                        <span class="mx-2">${item.quantity}</span>
                        <button class="increase-quantity w-8 h-8 rounded-full border border-gray-300" data-id="${item.id}" data-restaurant="${item.restaurantId}">+</button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            // Add event listeners to quantity buttons
            document.querySelectorAll('.increase-quantity').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.target.getAttribute('data-id'));
                    const restaurantId = parseInt(e.target.getAttribute('data-restaurant'));
                    updateCartItemQuantity(itemId, restaurantId, 1);
                });
            });
            
            document.querySelectorAll('.decrease-quantity').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.target.getAttribute('data-id'));
                    const restaurantId = parseInt(e.target.getAttribute('data-restaurant'));
                    updateCartItemQuantity(itemId, restaurantId, -1);
                });
            });
            
            // Update totals
            const deliveryFee = 40;
            cartSubtotal.textContent = `₹${subtotal.toFixed(2)}`;
            cartTotal.textContent = `₹${(subtotal + deliveryFee).toFixed(2)}`;
        }

        function updateCartItemQuantity(itemId, restaurantId, change) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const itemIndex = cart.findIndex(i => i.id === itemId && i.restaurantId === restaurantId);
            
            if (itemIndex !== -1) {
                cart[itemIndex].quantity += change;
                
                if (cart[itemIndex].quantity <= 0) {
                    cart.splice(itemIndex, 1);
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                renderCartItems();
            }
        }

        checkoutBtn.addEventListener('click', () => {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            
            // Simulate checkout process
            checkoutBtn.innerHTML = '<div class="loading-spinner"></div> Processing...';
            checkoutBtn.disabled = true;
            
            setTimeout(() => {
                // Create a new order
                const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                const deliveryFee = 40;
                const total = subtotal + deliveryFee;
                
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                const newOrder = {
                    id: `ORD${Date.now()}`,
                    restaurant: cart[0].restaurantName,
                    total: total,
                    date: new Date().toLocaleDateString(),
                    status: 'Preparing',
                    items: cart
                };
                
                orders.unshift(newOrder);
                localStorage.setItem('orders', JSON.stringify(orders));
                
                // Clear cart
                localStorage.setItem('cart', JSON.stringify([]));
                updateCartCount();
                
                // Close cart and show success message
                closeCartSidebar();
                alert(`Order placed successfully! Your order ID is ${newOrder.id}`);
                
                // Reset checkout button
                checkoutBtn.innerHTML = 'Proceed to Checkout';
                checkoutBtn.disabled = false;
                
                // Reload orders
                loadOrders();
            }, 2000);
        });

        // Restaurant Search and Filter Functionality
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const loadMoreBtn = document.getElementById('loadMoreBtn');

        function filterRestaurants(searchTerm = '', cuisineFilter = 'all') {
            const restaurantCards = document.querySelectorAll('.restaurant-card');
            restaurantCards.forEach(card => {
                const name = card.getAttribute('data-name');
                const cuisine = card.getAttribute('data-cuisine');
                const matchesSearch = name.includes(searchTerm.toLowerCase());
                const matchesCuisine = cuisineFilter === 'all' || cuisine === cuisineFilter;
                card.classList.toggle('hidden', !(matchesSearch && matchesCuisine));
            });
        }

        searchBtn.addEventListener('click', () => {
            filterRestaurants(searchInput.value);
        });

        searchInput.addEventListener('input', () => {
            filterRestaurants(searchInput.value);
        });

        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                const filter = button.getAttribute('data-filter');
                filterButtons.forEach(btn => btn.classList.remove('active', 'gradient-bg', 'text-white'));
                button.classList.add('active', 'gradient-bg', 'text-white');
                filterRestaurants(searchInput.value, filter);
            });
        });

        loadMoreBtn.addEventListener('click', () => {
            // In a real app, this would load more restaurants from an API
            alert('More restaurants loaded!');
        });

        // Orders Functionality
        const orderHistory = document.getElementById('orderHistory');
        const addOrderBtn = document.getElementById('addOrderBtn');

        function loadOrders() {
            try {
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                orderHistory.innerHTML = orders.length === 0 
                    ? '<p class="text-gray-600 text-center py-8">No orders yet. Your orders will appear here!</p>'
                    : '';
                orders.forEach(order => {
                    const orderDiv = document.createElement('div');
                    orderDiv.className = 'border-b border-gray-200 pb-4';
                    orderDiv.innerHTML = `
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="font-bold text-lg">Order #${order.id}</h3>
                                <p class="text-gray-600">${order.restaurant} • ₹${order.total.toFixed(2)}</p>
                                <p class="text-sm text-gray-500">${order.date}</p>
                            </div>
                            <span class="text-${order.status === 'Delivered' ? 'green' : 'blue'}-600 font-semibold">${order.status}</span>
                        </div>
                    `;
                    orderHistory.appendChild(orderDiv);
                });
            } catch (e) {
                console.error('Error loading orders:', e);
                orderHistory.innerHTML = '<p class="text-red-600 text-center py-8">Error loading orders. Please try again.</p>';
            }
        }

        addOrderBtn.addEventListener('click', () => {
            try {
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                const restaurants = ['Bella Italia', 'Dragon Wok', 'Burger Heaven', 'Taco Fiesta', 'Spice Garden', 'Thai Orchid', 'Curry House', 'Sweet Tooth'];
                const newOrder = {
                    id: `MOCK${orders.length + 1}`,
                    restaurant: restaurants[Math.floor(Math.random() * restaurants.length)],
                    total: (Math.random() * 500 + 150).toFixed(2),
                    date: new Date().toLocaleDateString(),
                    status: Math.random() > 0.5 ? 'Delivered' : 'In Transit'
                };
                orders.push(newOrder);
                localStorage.setItem('orders', JSON.stringify(orders));
                loadOrders();
            } catch (e) {
                console.error('Error adding order:', e);
            }
        });

        // Contact Form and Message History
        const contactForm = document.getElementById('contactForm');
        const messageHistory = document.getElementById('messageHistory');
        const contactName = document.getElementById('contactName');
        const contactEmail = document.getElementById('contactEmail');
        const contactMessage = document.getElementById('contactMessage');
        const contactNameError = document.getElementById('contactNameError');
        const contactEmailError = document.getElementById('contactEmailError');
        const contactMessageError = document.getElementById('contactMessageError');

        function clearContactErrors() {
            contactName.classList.remove('error-border');
            contactEmail.classList.remove('error-border');
            contactMessage.classList.remove('error-border');
            contactNameError.classList.add('hidden');
            contactEmailError.classList.add('hidden');
            contactMessageError.classList.add('hidden');
            contactNameError.textContent = '';
            contactEmailError.textContent = '';
            contactMessageError.textContent = '';
        }

        function loadMessages() {
            try {
                const messages = JSON.parse(localStorage.getItem('messages')) || [];
                messageHistory.innerHTML = messages.length === 0 
                    ? '<p class="text-gray-600 text-center py-8">No messages yet. Your messages will appear here!</p>'
                    : '';
                messages.forEach(msg => {
                    const msgDiv = document.createElement('div');
                    msgDiv.className = 'bg-orange-50 p-4 rounded-lg';
                    msgDiv.innerHTML = `
                        <div class="flex justify-between items-center">
                            <span class="font-semibold">${msg.name}</span>
                            <span class="text-gray-600 text-sm">${msg.date}</span>
                        </div>
                        <p class="text-gray-600 mt-2">${msg.message}</p>
                    `;
                    messageHistory.prepend(msgDiv);
                });
            } catch (e) {
                console.error('Error loading messages:', e);
                messageHistory.innerHTML = '<p class="text-red-600 text-center py-8">Error loading messages. Please try again.</p>';
            }
        }

        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            clearContactErrors();
            const name = contactName.value.trim();
            const email = contactEmail.value.trim();
            const message = contactMessage.value.trim();
            let hasError = false;

            if (!name) {
                contactName.classList.add('error-border');
                contactNameError.textContent = 'Name is required';
                contactNameError.classList.remove('hidden');
                hasError = true;
            }
            if (!email) {
                contactEmail.classList.add('error-border');
                contactEmailError.textContent = 'Email is required';
                contactEmailError.classList.remove('hidden');
                hasError = true;
            }
            if (!message) {
                contactMessage.classList.add('error-border');
                contactMessageError.textContent = 'Message is required';
                contactMessageError.classList.remove('hidden');
                hasError = true;
            }
            if (hasError) return;

            try {
                const messages = JSON.parse(localStorage.getItem('messages')) || [];
                messages.push({ name, email, message, date: new Date().toLocaleDateString() });
                localStorage.setItem('messages', JSON.stringify(messages));
                contactForm.reset();
                loadMessages();
            } catch (e) {
                console.error('Error saving message:', e);
                alert('Error saving message. Please try again.');
            }
        });

        // Chatbot Functionality
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendMessageBtn = document.getElementById('sendMessage');
        const quickReplies = document.querySelectorAll('.quick-reply');

        const botResponses = {
            'order status': 'To check your order status, please check the "Orders" section above.',
            'menu items': 'You can browse our complete menu by selecting a restaurant from the "Restaurants" section.',
            'delivery time': 'Delivery times vary by restaurant and location. Typical delivery times range from 20-45 minutes.',
            'payment issues': 'For payment issues, please check your payment method details or contact our support team at support@foodexpress.com',
            'default': 'I can help with order status, menu items, delivery times, and payment issues. What would you like to know?'
        };

        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = isUser ? 'user-bubble chat-bubble' : 'bot-bubble chat-bubble';
            messageDiv.textContent = message;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleMessage(message) {
            const lowerMessage = message.toLowerCase();
            let response = botResponses.default;
            for (const [key, value] of Object.entries(botResponses)) {
                if (lowerMessage.includes(key) && key !== 'default') {
                    response = value;
                    break;
                }
            }
            setTimeout(() => addMessage(response), 1000);
        }

        sendMessageBtn.addEventListener('click', () => {
            const message = chatInput.value.trim();
            if (message) {
                addMessage(message, true);
                chatInput.value = '';
                handleMessage(message);
            }
        });

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessageBtn.click();
        });

        quickReplies.forEach(button => {
            button.addEventListener('click', () => {
                const message = button.textContent;
                addMessage(message, true);
                handleMessage(message);
            });
        });

        // Tip Functionality
        const tipButtons = document.querySelectorAll('.tip-btn');
        const customTip = document.getElementById('customTip');
        const submitTip = document.getElementById('submitTip');
        const tipHistory = document.getElementById('tipHistory');
        const ratingStars = document.querySelectorAll('[data-rating]');
        const deliveryPartnerName = document.getElementById('deliveryPartnerName');
        const partnerNameError = document.getElementById('partnerNameError');
        const ratingError = document.getElementById('ratingError');
        const tipError = document.getElementById('tipError');
        
        let selectedRating = 0;
        let selectedTipAmount = 0;

        function clearTipErrors() {
            deliveryPartnerName.classList.remove('error-border');
            partnerNameError.classList.add('hidden');
            partnerNameError.textContent = '';
            ratingError.classList.add('hidden');
            ratingError.textContent = '';
            customTip.classList.remove('error-border');
            tipError.classList.add('hidden');
            tipError.textContent = '';
        }

        ratingStars.forEach(star => {
            star.addEventListener('click', () => {
                const rating = parseInt(star.getAttribute('data-rating'));
                selectedRating = rating;
                ratingStars.forEach((s, index) => {
                    s.classList.toggle('text-yellow-400', index < rating);
                    s.classList.toggle('text-gray-300', index >= rating);
                });
                clearTipErrors();
            });
        });

        tipButtons.forEach(button => {
            button.addEventListener('click', () => {
                tipButtons.forEach(btn => btn.classList.remove('gradient-bg', 'text-white'));
                button.classList.add('gradient-bg', 'text-white');
                selectedTipAmount = parseFloat(button.getAttribute('data-amount'));
                customTip.value = '';
                clearTipErrors();
            });
        });

        customTip.addEventListener('input', () => {
            tipButtons.forEach(btn => btn.classList.remove('gradient-bg', 'text-white'));
            const value = parseFloat(customTip.value);
            selectedTipAmount = (value >= 0 && !isNaN(value)) ? value : 0;
            clearTipErrors();
        });

        submitTip.addEventListener('click', () => {
            clearTipErrors();
            const partnerName = deliveryPartnerName.value.trim();
            let hasError = false;

            if (!partnerName) {
                deliveryPartnerName.classList.add('error-border');
                partnerNameError.textContent = 'Please enter the delivery partner name';
                partnerNameError.classList.remove('hidden');
                hasError = true;
            }
            if (selectedRating === 0) {
                ratingError.textContent = 'Please rate your delivery experience';
                ratingError.classList.remove('hidden');
                hasError = true;
            }
            if (selectedTipAmount === 0) {
                customTip.classList.add('error-border');
                tipError.textContent = 'Please select or enter a tip amount';
                tipError.classList.remove('hidden');
                hasError = true;
            }
            if (hasError) return;

            const tipEntry = document.createElement('div');
            tipEntry.className = 'bg-orange-50 p-4 rounded-lg';
            tipEntry.innerHTML = `
                <div class="flex justify-between items-center">
                    <span class="font-semibold">${partnerName}</span>
                    <span class="text-green-600 font-bold">₹${selectedTipAmount.toFixed(2)}</span>
                </div>
                <div class="flex text-yellow-400 mt-1">
                    ${'★'.repeat(selectedRating)}${'☆'.repeat(5 - selectedRating)}
                </div>
                <div class="text-sm text-gray-600 mt-2">${new Date().toLocaleDateString()}</div>
            `;
            if (tipHistory.querySelector('.text-gray-600')) {
                tipHistory.innerHTML = '';
            }
            tipHistory.prepend(tipEntry);
            deliveryPartnerName.value = '';
            ratingStars.forEach(star => star.classList.add('text-gray-300'));
            tipButtons.forEach(btn => btn.classList.remove('gradient-bg', 'text-white'));
            customTip.value = '';
            selectedRating = 0;
            selectedTipAmount = 0;
            alert(`Thank you for tipping ${partnerName}! Your ₹${selectedTipAmount.toFixed(2)} tip and ${selectedRating}-star rating have been recorded.`);
        });

        // Initialize cart count on page load
        updateCartCount();
        
        // Load orders and messages on page load
        loadOrders();
        loadMessages();
    </script>
</body>
</html>
